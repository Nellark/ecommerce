<div class="cart-page">
  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <h1 class="page-title">Shopping Cart</h1>
    </div>

    <!-- Cart Content -->
    <div class="cart-content" *ngIf="cartItems.length > 0; else emptyCart">
      <div class="cart-items">
        <div class="cart-item" *ngFor="let item of cartItems" (click)="goToProduct(item.product.id)">
          
          <!-- Product Image -->
          <div class="item-image">
            <img [src]="item.product.image" [alt]="item.product.name">
          </div>

          <!-- Product Details -->
          <div class="item-details">
            <h3 class="item-name">{{ item.product.name }}</h3>
            <p class="item-category">{{ item.product.category }}</p>
            <p class="item-price">R {{ item.product.price }}</p>
          </div>

          <!-- Quantity Controls -->
          <div class="item-quantity" (click)="$event.stopPropagation()">
            <div class="quantity-controls">
              <button class="qty-btn" (click)="decreaseQuantity(item)">-</button>
              <span class="quantity">{{ item.quantity }}</span>
              <button class="qty-btn" (click)="increaseQuantity(item)">+</button>
            </div>
          </div>

          <!-- Total Price -->
          <div class="item-total">
            <span class="total-price">
              R {{ (item.product.price * item.quantity).toFixed(2) }}
            </span>
          </div>
          
        </div>
        <div class="cart-terms">
          <p>
            By proceeding to checkout, you agree to our 
            <a routerLink="/terms" target="_blank">Terms & Conditions</a>.
          </p>
        </div>
      </div>
      

      <!-- Cart Summary -->
      <div class="cart-summary">
        <div class="summary-card">
          <h2>Order Summary</h2>

          <div class="summary-line">
            <span>Subtotal</span>
            <span>R {{ getCartTotal().toFixed(2) }}</span>
          </div>

          <div class="summary-line">
            <span>Shipping</span>
            <span>Free</span>
          </div>

          <div class="summary-line">
            <span>Tax</span>
            <span>R {{ (getCartTotal() * 0.08).toFixed(2) }}</span>
          </div>

          <div class="summary-divider"></div>

          <div class="summary-line summary-total">
            <span>Total</span>
            <span>R {{ (getCartTotal() * 1.08).toFixed(2) }}</span>
          </div>

          <div class="checkout-actions">
            <button class="btn btn-primary checkout-btn" [routerLink]="['/checkout']">
              Proceed to Checkout
            </button>

            <button class="btn btn-outline continue-btn" routerLink="/products">
              Continue Shopping
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty Cart -->
    <ng-template #emptyCart>
      <div class="empty-cart">
        <div class="empty-cart-content">
          <div class="empty-cart-icon">ðŸ›’</div>
          <h2>Your cart is empty</h2>
          <p>Add some products to your cart to get started.</p>
          <button class="btn btn-primary" routerLink="/products">Start Shopping</button>
        </div>
      </div>
    </ng-template>
  </div>
</div>
